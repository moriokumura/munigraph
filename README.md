# 概要

- 日本の自治体の廃置分合について学べるリファレンス兼クイズアプリ
- Webブラウザのクライアントサイドのみで完結し、ユーザー認証などは行わない

## システム構成
- Vue 3
- TypeScypt
- Vite
- Pinia
- ESlint
- Tailwind CSS

### 検討
- Cytoscape

## 用意するデータ

### データの種類
- 都道府県マスタレコード (prefectures.csv) (47)
- 郡・政令区・支庁・振興局マスタレコード (counties.csv)  (500)
- 市区町村マスタレコード (cities.csv) (10k〜)
  - valid_toが空欄ならば現存の市区町村とみなす
  - 同じ自治体でも合併や分裂、町制や市制の施行が生じた場合は別レコード
- 廃置分合イベントレコード (change_events.csv)  (10k〜)
  - 1行で１市区町村の変化のみを扱う。N個の自治体が1自治体に合併した場合はN行のレコードとなる。

### データ形式と処理
- 元データはCSVファイル, UTF-8（軽量かつ編集しやすいため）
- アプリケーションがCSVを全て読み込みメモリ内にツリー構造で持つ
- codeは0-9の数字文字列からのみなる文字列とする
- 読みがな(yomi)はひらがな表記とする
- nameの旧字は新字にせずそのままの表記とする
- dateが同日のeventの順序は不定でよい(順序が必要になったときには再検討)
- event_typeは便宜上change_envents.csvに直書きしているが、種類を限定しtsのソースコード内に定義したい。

## アプリケーション挙動（クイズモード）
- イベントレコードからランダムに出題
  マスタレコードを引いて郡や市区町村名を表示
  名称をランダムにマスク
  マスクされた箇所を文字列入力して正否を表示

## アプリケーション挙動（ブラウズモード）
- 現存の市区町村名を表示
- または自治体名を検索して該当する自治体を表示
- クリックで１つ過去のイベントと祖先自治体を表示

---

## 開発環境・基本コマンド

プロジェクトルートで以下のコマンドを実行してください。

### 依存パッケージのインストール
```
npm install
```

### 開発サーバーの起動
```
npm run dev
```

### 本番用ビルド
```
npm run build
```

### Lint
```
npm run lint
npm run format
```

### ビルド成果物のプレビュー
```
npm run preview
```

## ToDo

### データ問題
- 東京23区を追加、政令市の区を下位概念に移動
- 政令指定都市は区名しかなく、市名がない
  - しかも消滅した区が現存扱いになっている

#### データ不足
- 明治期〜1970年の期間のデータがない
- 旧支庁名がない（北海道ほか）

### デザイン
- 一覧のデザイン改善
- initialのコード形式を変えたい

### 実装
- ノード表示に変え、選択中の自治体が二重表示にならないようにしたい
